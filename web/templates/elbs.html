{% extends "base.html" %}
{% load i18n %}
{% block title %}{% trans "ELB Instances" %}{% endblock %}

{% block content %}
<script>
    var prices = {
        application: { by_hour: 0.0252 },
        network: { by_hour: 0.0252 },
        classic: { by_hour: 0.028 },
    };

    function get_elb_price(type) {
        return Math.floor(prices[type].by_hour * 24 * 31);
    }
</script>
<div class="panel panel-default">
  <div class="panel-body">
<h2>
    <button class="btn btn-primary btn-lg" type="button">ELB List <span class="xbadge"><b>{{ elblist|length }}</b></span> defined</button>
    <button class="btn btn-warning btn-lg" type="button">Average Price per Month <span class="xbadge"><b>${{ price }}</b></span> (without Data Transfer)</button>
</h2>
<table class="table">
    <thead><td>Name</td><td>Type (Price per month)</td><td>DNS Name</td><td>Listeners</td><td>Instances</td><td>Count</td><td>Target Groups</td></thead>
    <tbody class="table-striped">
    {% for elb in elblist %}
        <tr>
            <td>{{ elb.name }}</td>
            <td>{{ elb.type }} <span class="badge"><script>document.writeln(get_elb_price("{{ elb.type }}"))</script></span></td>
            <td>{{ elb.DNSName }}</td>
            <td>{% for lis in elb.listeners %}{{ lis }}{% if not forloop.last %},{% endif %}{% endfor %}</td>
            <td>{% if elb.instances|length == 0 %}<span class="label label-danger">&nbsp;</span>{% endif %}{% for inst in elb.instances %}<span class="label label-info">{{ inst }}{% if not forloop.last %}</span>&nbsp;{% endif %}{% endfor %}</td>
            <td>{% if elb.instances|length == 0 %}<span class="label label-danger">&nbsp{% else %}<span class="label label-success">&nbsp{% endif %}{{ elb.instances|length }}</span></td>
            <td>{% for tgt in elb.target_groups %}{{ tgt }}{% if not forloop.last %},{% endif %}{% endfor %}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
  </div>
</div>
{% endblock %}
